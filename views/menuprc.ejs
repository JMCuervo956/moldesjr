<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MJR</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">

    <!--EstÃ¡s usando Font Awesome Free, versiÃ³n 6.0.0-beta3. -->
    <!--EstÃ¡ servida desde CDNJS, un repositorio pÃºblico de recursos gratuitos. -->
    
    <%- include('partials/head') %> <!-- <link rel="stylesheet" href="main.css"> /// partial para repetir en cada una de las paginas -->

    <style>

        .encabezado {
          position: fixed;
          top: 0;
          width: 100%;
          background-color: #fff;
          z-index: 1000;
          padding: 15px 20px;
          box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        /* Altura reservada para el encabezado */
        .detalle-scroll {
          margin-top: 150px; /* Ajusta segÃºn el alto real del header */
          height: calc(100% - 120px);
          overflow-y: auto;
          padding: 20px;
          background-color: #f7f7f7;
        }        

        .dropdown {
          position: relative; /* Necesario para el dropdown */
        }
      
        .dropdown-content {
          display: none; /* Ocultar el contenido del dropdown */
          position: absolute; /* Posicionamiento absoluto */
          left: 50px; /* Ajusta este valor para mover el submenÃº a la derecha */
          background-color: #ffffcc; /* Color de fondo del dropdown */
          min-width: 150px; /* Ancho mÃ­nimo para el dropdown */
          z-index: 1; /* Para asegurarse de que estÃ© sobre otros elementos */
        }
      
        .dropdown:hover .dropdown-content {
          display: block; /* Mostrar contenido al pasar el mouse */
        }

        h1 {
          text-align: center;
          margin-bottom: 30px;
        }

        /* Lista de Ã­tems del menÃº */
        nav ul {
          list-style: none;
          padding-left: 0;
          margin: 0;
        }

        /* Elementos del menÃº */
        nav li {
          position: relative;
          margin: 10px 0;
          transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }

        nav a {
          text-decoration: none;
          display: flex;
          align-items: center;
          padding: 12px 15px;
          color: #333;
          font-weight: 500;
          border-radius: 6px;
          background-color: #f8f8f8;
          box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
          transition: all 0.3s ease;
        }

        /* Color de los Ã­conos - General */
        nav i {
          margin-right: 15px;
          font-size: 1.2em;
          color: #666; /* Color base gris para los Ã­conos */
          transition: color 0.3s ease;
        }

        /* Colores personalizados por tipo de Ã­tem */
        nav li a:hover {
          background-color: #d6d6d6;
          box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        nav li a:hover i {
          color: #4CAF50; /* Cambiar color de los Ã­conos al pasar el ratÃ³n */
        }

        /* Colores de Ã­conos personalizados para los elementos */
        nav li a i.fas.fa-home {
          color: #2196F3; /* Azul para 'Inicio' */
        }

        nav li a i.fas.fa-cogs {
          color: #FF9800; /* Naranja para 'Servicios' */
        }

        nav li a i.fas.fa-users {
          color: #9C27B0; /* PÃºrpura para 'Sobre Nosotros' */
        }

        /* Asegurarnos que los Ã­conos dentro de los submenÃºs tambiÃ©n tengan color */
        nav li a i.fas.fa-code,
        nav li a i.fas.fa-paint-brush,
        nav li a i.fas.fa-user-friends,
        nav li a i.fas.fa-history {
          color: #555; /* Colores predeterminados para los subÃ­conos */
        }

        nav li a:hover i.fas.fa-code,
        nav li a:hover i.fas.fa-paint-brush,
        nav li a:hover i.fas.fa-user-friends,
        nav li a:hover i.fas.fa-history {
          color: #4CAF50; /* Cambiar color de los subÃ­conos al pasar el ratÃ³n */
        }

        /* SubmenÃº desplegable */
        nav ul ul {
          margin-left: 20px;
          display: none;
          max-height: 0;
          overflow: hidden;
          transition: max-height 0.3s ease;
        }

        nav li.open > ul {
          display: block;
          max-height: 500px; /* Suficiente para submenÃºs */
        }

        nav li.open > a {
          background-color: #e1f5fe; /* Color de fondo al abrir el submenÃº */
          color: #0277bd; /* Texto azul al abrir */
        }

        /* Responsividad para pantallas pequeÃ±as */
        @media (max-width: 768px) {
        Â  nav {
            max-width: 100%;
            padding: 20px;
            }

        Â  nav li {
            margin: 5px 0;
            }

        Â  nav a {
            justify-content: flex-start;
            padding: 8px 12px;
            }

        Â  nav ul ul {
            display: none;
            max-height: 0;
            }

        Â  nav li.open > ul {
            display: block;
            }
        }

        nav ul ul {
          display: none;
          margin-left: 20px;
        }

        nav li.open > ul {
          display: block;
        }
        
        nav ul {
          list-style: none;
          padding-left: 0;
        }

        nav ul ul {
          display: none;
          margin-left: 20px;
          max-height: 0;
          overflow: hidden;
          transition: max-height 0.3s ease;
        }

        nav li.open > ul {
          display: block;
          max-height: 500px;
        }

        nav li.active > a {
          background-color: #d0e7ff;
          color: #df350b;
          font-weight: bold;
        }

        nav li.active > a i {
          color: #004b8d;
        }


        html, body {
          margin: 0;
          padding: 0;
          height: 100%;
          overflow: hidden; /* Evita que el body entero tenga scroll */
          font-family: 'Roboto', sans-serif;



      /* iconColors.css */
      .icon-home       { color: #4caf50; }   /* verde */
      .icon-users      { color: #2196f3; }   /* azul */
      .icon-cogs       { color: #ff9800; }   /* naranja */
      .icon-envelope   { color: #f44336; }   /* rojo */
      .icon-file-alt   { color: #3f51b5; }   /* azul oscuro */
      .icon-users-cog  { color: #9b59b6; }   /* pÃºrpura */
      .icon-history    { color: #f1c40f; }   /* amarillo */

    /* Barra horizontal elegante */
    .barra-opciones {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      background-color: #8b0b07;
      padding: 10px 20px;
      gap: 15px; /* Espacio entre botones */
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .barra-opciones button {
      background-color: #f3f8f3;
      border: none;
      color: rgb(99, 6, 6);
      padding: 10px 16px;
      margin-left: 10px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      transition: background-color 0.3s ease;
    }

    .barra-opciones button:hover {
      background-color: #dbdbd6;
    }      

    .barra-opciones a {
      text-decoration: none;
      background-color: #3a66cc; /* Estilo de botÃ³n */
      color: white;
      padding: 10px 16px;
      border-radius: 5px;
      font-size: 14px;
      font-weight: bold;
      transition: background-color 0.3s ease;
    }

    .barra-opciones a:hover {
      background-color: #2f55aa;
    }    
      </style>

</head>
<body class="body.imagen">
  <!-- Encabezado fijo -->
  <header class="encabezado">
    <% if (rol==='1') { %>
        <%- include('partials/navigationf') %>  
    <% } else { %> 
        <%- include('partials/navigation') %>   
    <% } %>
    
    <div style="display: flex; justify-content: flex-end; padding: 10px 20px;">
      <h5 style="font-size: 10px; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); transition: color 0.3s ease; margin: 0;"
        onmouseover="this.querySelector('.user').style.color='darkblue'; this.querySelector('.name').style.color='darkred';"
        onmouseout="this.querySelector('.user').style.color='blue'; this.querySelector('.name').style.color='green';">
        <span class="user" style="color: blue; padding-left: 10px;"><%= name %></span>
        <span class="name" style="color: green;"> - <%= rol %></span>
        <span class="name" style="color: green;"> - 20250912</span>
      </h5>
    </div>
    
  </header>
  
  <% if (typeof mensaje !== 'undefined') { %>
  <div class="alert alert-<%= mensaje.tipo %> alert-dismissible fade show" role="alert" id="alertaMensaje">
    <%= mensaje.texto %>
    <button type="button" class="close" data-dismiss="alert" aria-label="Cerrar">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <% } %>

  <!-- Contenido desplazable -->
  <div class="detalle-scroll">
  <div class="barra-opciones">
    <a href="/cambioctr" class="modern-btn btn-azul">Cambiar ContraseÃ±a</a>
    <a href="/" class="modern-btn btn-azul">Salir</a>
  </div>

<% if (cumpleaneros && cumpleaneros.length > 0) { %>
<!-- Modal de cumpleaÃ±os -->
<div id="cumpleModal" class="modal" style="display: block; position: fixed; z-index: 9999; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5);">
  <div class="modal-content" style="margin: 15% auto; padding: 20px; background: white; border-radius: 10px; width: 50%; text-align: center;">
    <h2>ðŸŽ‰ Â¡Feliz CumpleaÃ±os!</h2>
    <p>Hoy estÃ¡n de cumpleaÃ±os:</p>
    <ul>
      <% cumpleaneros.forEach(c => { %>
        <li><strong><%= c.funcionario %></strong> - <%= c.email %></li>
      <% }); %>
    </ul>
    <button onclick="document.getElementById('cumpleModal').style.display='none'">Cerrar</button>
  </div>
</div>
<% } %>

    <div class="content">
      <div style="display: inline;">
        <div class="register-menu">
          <% if (rol === '1') { %>
            <nav id="menu"></nav>
          <% } else { %>
            <nav id="filteredMenu"></nav>
          <% } %>
        </div>
      </div>
    </div>
  </div>

  <script>
    window.permisosUsuario = <%- JSON.stringify(modulos) %>; // ðŸ‘ˆ lista como array JS
  </script>

  <!-- Cargar tu JS -->
  <script type="module" src="./main.js"></script>

  <script>
    // Opcional: autocierra el mensaje despuÃ©s de 5 segundos
    setTimeout(() => {
      const alert = document.getElementById('alertaMensaje');
      if (alert) alert.classList.remove('show');
    }, 5000);
  </script>

  <script type="module" src="./main.js"></script>
  <script type="module" src="./pdf.js"></script>
  <%- include('partials/footer') %>  
</body>

</html>
